---
title: CLI Reference
description: Complete Nucel CLI command reference
icon: Terminal
---

import { Callout } from 'fumadocs-ui/components/callout';

## Installation

```bash tab="npm"
npm install -g @donswayo/nucel-cli
```

```bash tab="pnpm"
pnpm add -g @donswayo/nucel-cli
```

```bash tab="yarn"
yarn global add @donswayo/nucel-cli
```

```bash tab="bun"
bun add -g @donswayo/nucel-cli
```

## Commands

### `nucel deploy`

Deploy your application to AWS.

```bash
nucel deploy [options]
```

**Options:**

| Option | Description | Default |
|--------|-------------|---------|
| `--stack, -s <name>` | Stack name to deploy | `development` |
| `--preview` | Preview changes without deploying | `false` |
| `--yes, -y` | Skip confirmation prompts | `false` |
| `--verbose` | Show detailed output | `false` |
| `--region <region>` | AWS region | `us-east-1` |
| `--profile <profile>` | AWS profile | `default` |

**Examples:**

```bash
# Deploy to development
nucel deploy

# Deploy to production
nucel deploy --stack production

# Preview changes
nucel deploy --preview

# Deploy with specific AWS profile
nucel deploy --profile personal --region eu-west-1

# Skip confirmation
nucel deploy --yes
```

### `nucel init`

Initialize Nucel in your project.

```bash
nucel init [options]
```

**Options:**

| Option | Description | Default |
|--------|-------------|---------|
| `--force` | Overwrite existing config | `false` |
| `--framework <type>` | Framework type | Auto-detect |

**Examples:**

```bash
# Initialize with auto-detection
nucel init

# Force specific framework
nucel init --framework nextjs

# Overwrite existing config
nucel init --force
```

### `nucel destroy`

Remove deployed infrastructure.

```bash
nucel destroy [options]
```

**Options:**

| Option | Description | Default |
|--------|-------------|---------|
| `--stack, -s <name>` | Stack to destroy | `development` |
| `--yes, -y` | Skip confirmation | `false` |
| `--force` | Force destroy (ignore errors) | `false` |

**Examples:**

```bash
# Destroy development stack
nucel destroy

# Destroy production stack with confirmation
nucel destroy --stack production

# Force destroy without confirmation
nucel destroy --yes --force
```

<Callout type="warning">
This permanently deletes all AWS resources for the stack. This action cannot be undone.
</Callout>

### `nucel list`

List all deployed stacks.

```bash
nucel list [options]
```

**Options:**

| Option | Description | Default |
|--------|-------------|---------|
| `--json` | Output as JSON | `false` |
| `--verbose` | Show detailed info | `false` |

**Examples:**

```bash
# List all stacks
nucel list

# Detailed stack information
nucel list --verbose

# JSON output for scripting
nucel list --json
```

### `nucel logs`

View application logs from CloudWatch.

```bash
nucel logs [options]
```

**Options:**

| Option | Description | Default |
|--------|-------------|---------|
| `--stack, -s <name>` | Stack name | `development` |
| `--tail, -f` | Follow log output | `false` |
| `--since <time>` | Time range (e.g., "5m", "1h") | `10m` |
| `--filter <pattern>` | Filter pattern | None |

**Examples:**

```bash
# View recent logs
nucel logs

# Tail production logs
nucel logs --stack production --tail

# View last hour of errors
nucel logs --since 1h --filter ERROR

# Follow development logs
nucel logs -f
```

### `nucel config`

Manage Nucel configuration.

```bash
nucel config <subcommand> [options]
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `show` | Display current configuration |
| `set <key> <value>` | Set configuration value |
| `get <key>` | Get configuration value |
| `validate` | Validate configuration |

**Examples:**

```bash
# Show current config
nucel config show

# Set AWS region
nucel config set region eu-west-1

# Get specific value
nucel config get framework

# Validate configuration
nucel config validate
```

### `nucel status`

Check deployment status.

```bash
nucel status [options]
```

**Options:**

| Option | Description | Default |
|--------|-------------|---------|
| `--stack, -s <name>` | Stack name | `development` |
| `--json` | Output as JSON | `false` |

**Examples:**

```bash
# Check development status
nucel status

# Check production status
nucel status --stack production

# JSON output
nucel status --json
```

### `nucel env`

Manage environment variables.

```bash
nucel env <subcommand> [options]
```

**Subcommands:**

| Command | Description |
|---------|-------------|
| `list` | List environment variables |
| `set <key> <value>` | Set environment variable |
| `unset <key>` | Remove environment variable |
| `pull` | Pull from AWS Secrets Manager |
| `push` | Push to AWS Secrets Manager |

**Examples:**

```bash
# List current env vars
nucel env list --stack production

# Set environment variable
nucel env set API_KEY abc123 --stack production

# Remove variable
nucel env unset DEBUG --stack production

# Sync with AWS Secrets
nucel env pull --stack production
nucel env push --stack production
```

## Global Options

These options work with all commands:

| Option | Description |
|--------|-------------|
| `--help, -h` | Show help |
| `--version, -v` | Show version |
| `--config <path>` | Config file path |
| `--no-color` | Disable colored output |
| `--quiet, -q` | Minimal output |

## Environment Variables

Nucel respects these environment variables:

| Variable | Description | Default |
|----------|-------------|---------|
| `NUCEL_STACK` | Default stack name | `development` |
| `NUCEL_REGION` | AWS region | `us-east-1` |
| `AWS_PROFILE` | AWS profile | `default` |
| `AWS_REGION` | AWS region | `us-east-1` |
| `PULUMI_CONFIG_PASSPHRASE` | Pulumi passphrase | Required |
| `NO_COLOR` | Disable colors | `false` |

## Configuration File

Nucel uses `nucel.config.ts` for project configuration:

```ts title="nucel.config.ts"
export default {
  // Framework (auto-detected if not set)
  framework: 'nextjs',
  
  // Build settings
  buildCommand: 'npm run build',
  outputDirectory: '.next',
  
  // AWS settings
  region: 'us-east-1',
  profile: 'default',
  
  // Function settings
  runtime: 'nodejs20.x',
  memorySize: 1024,
  timeout: 30,
  
  // Domain settings
  domain: 'app.example.com',
  certificateArn: 'arn:aws:acm:...',
  
  // Environment variables
  env: {
    NODE_ENV: 'production',
  },
  
  // Stack-specific config
  stacks: {
    production: {
      domain: 'app.example.com',
      memorySize: 2048,
    },
    staging: {
      domain: 'staging.example.com',
    }
  }
}
```

## AWS Vault Integration

Use AWS Vault for secure credential management:

```bash
# Basic deployment
aws-vault exec personal -- nucel deploy

# With environment variables
AWS_DEFAULT_REGION=us-east-1 \
PULUMI_CONFIG_PASSPHRASE="" \
aws-vault exec personal --no-session -- nucel deploy

# Production deployment
aws-vault exec production -- nucel deploy --stack production
```

## CI/CD Usage

### GitHub Actions

```yaml
- name: Deploy with Nucel
  run: |
    npm install -g @donswayo/nucel-cli
    nucel deploy --stack production --yes
  env:
    AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
    AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
    PULUMI_CONFIG_PASSPHRASE: ${{ secrets.PULUMI_CONFIG_PASSPHRASE }}
```

### GitLab CI

```yaml
deploy:
  script:
    - npm install -g @donswayo/nucel-cli
    - nucel deploy --stack production --yes
  variables:
    AWS_ACCESS_KEY_ID: $AWS_ACCESS_KEY_ID
    AWS_SECRET_ACCESS_KEY: $AWS_SECRET_ACCESS_KEY
    PULUMI_CONFIG_PASSPHRASE: $PULUMI_CONFIG_PASSPHRASE
```

## Exit Codes

Nucel uses standard exit codes:

| Code | Description |
|------|-------------|
| `0` | Success |
| `1` | General error |
| `2` | Misuse of command |
| `3` | Configuration error |
| `4` | AWS error |
| `5` | Build error |
| `126` | Permission denied |
| `127` | Command not found |

## Troubleshooting

<Callout type="info">
Use `--verbose` flag for detailed error output when debugging issues.
</Callout>

### Debug Mode

Enable debug output:

```bash
# Verbose output
nucel deploy --verbose

# Debug environment
DEBUG=* nucel deploy

# Trace AWS calls
AWS_SDK_LOAD_CONFIG=1 nucel deploy --verbose
```

### Common Issues

**Command not found:**
```bash
# Check installation
npm list -g @donswayo/nucel-cli

# Reinstall
npm install -g @donswayo/nucel-cli
```

**Permission denied:**
```bash
# Fix npm permissions
sudo npm install -g @donswayo/nucel-cli

# Or use npx
npx @donswayo/nucel-cli deploy
```

**AWS credentials error:**
```bash
# Check credentials
aws sts get-caller-identity

# Configure credentials
aws configure
```